# Migration `20200505114312-make-order-id-mandatory`

This migration has been generated by Tom Barton at 5/5/2020, 11:43:12 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."OrderItem" DROP CONSTRAINT IF EXiSTS "OrderItem_orderId_fkey",
DROP COLUMN "orderId",
ADD COLUMN "orderId" integer  NOT NULL ;

ALTER TABLE "public"."OrderItem" ADD FOREIGN KEY ("orderId")REFERENCES "public"."Order"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER INDEX "public"."Cart.userId" RENAME TO "Cart_userId"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200505104459-make-cart-user-id-unique..20200505114312-make-order-id-mandatory
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 model User {
   email            String    @unique
@@ -57,10 +57,10 @@
   title    String
   image    String
   price    Int
   quantity Int
-  Order    Order? @relation(fields: [orderId], references: [id])
-  orderId  Int?
+  Order    Order  @relation(fields: [orderId], references: [id])
+  orderId  Int
 }
 enum OrderStatus {
   PENDING
```


