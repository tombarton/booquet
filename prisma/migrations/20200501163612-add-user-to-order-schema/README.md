# Migration `20200501163612-add-user-to-order-schema`

This migration has been generated by Tom Barton at 5/1/2020, 4:36:12 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Order" ADD COLUMN "userId" integer  NOT NULL ;

ALTER TABLE "public"."Order" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200501155705-add-order-schema..20200501163612-add-user-to-order-schema
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 model User {
   email            String      @unique
@@ -19,8 +19,9 @@
   updatedAt        DateTime    @updatedAt
   role             Role
   cart             CartItem[]
   OrderItem        OrderItem[]
+  Order            Order[]
 }
 enum Role {
   ADMIN
@@ -69,5 +70,7 @@
   status    OrderStatus
   chargeId  String
   createdAt DateTime    @default(now())
   updatedAt DateTime    @updatedAt
+  user      User        @relation(fields: [userId], references: [id])
+  userId    Int
 }
```


